<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RipIt - YouTube, Instagram & TikTok Downloader</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:wght@400;500;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e27;
            --bg-secondary: #151932;
            --bg-card: #1a1f3a;
            --accent: #00ff88;
            --accent-dark: #00cc6a;
            --text-primary: #ffffff;
            --text-secondary: #8b92b0;
            --border: #2a2f4a;
            --error: #ff4757;

            /* Platform colors */
            --yt-color: #ff0000;
            --yt-shorts-color: #ff4500;
            --ig-color: #e1306c;
            --tt-color: #69c9d0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background:
                radial-gradient(circle at 20% 50%, rgba(0, 255, 136, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(138, 43, 226, 0.06) 0%, transparent 50%),
                radial-gradient(circle at 60% 20%, rgba(0, 200, 255, 0.05) 0%, transparent 40%);
            animation: bgShift 20s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes bgShift {

            0%,
            100% {
                transform: translate(0, 0) rotate(0deg);
            }

            50% {
                transform: translate(-5%, -5%) rotate(5deg);
            }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
        header {
            text-align: center;
            margin-bottom: 50px;
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-family: 'Space Mono', monospace;
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--accent) 0%, #00ffff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -2px;
        }

        .tagline {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Platform badges in header */
        .platform-badges {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 18px;
            flex-wrap: wrap;
        }

        .platform-badge {
            padding: 5px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            border: 1px solid;
        }

        .badge-yt {
            color: var(--yt-color);
            border-color: var(--yt-color);
            background: rgba(255, 0, 0, 0.08);
        }

        .badge-yt-s {
            color: var(--yt-shorts-color);
            border-color: var(--yt-shorts-color);
            background: rgba(255, 69, 0, 0.08);
        }

        .badge-ig {
            color: var(--ig-color);
            border-color: var(--ig-color);
            background: rgba(225, 48, 108, 0.08);
        }

        .badge-tt {
            color: var(--tt-color);
            border-color: var(--tt-color);
            background: rgba(105, 201, 208, 0.08);
        }

        /* ‚îÄ‚îÄ Main Card ‚îÄ‚îÄ */
        .main-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 0.8s ease-out 0.2s backwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .input-group {
            position: relative;
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 10px;
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .url-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .url-input {
            width: 100%;
            padding: 18px 20px;
            padding-right: 145px;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'Space Mono', monospace;
            transition: all 0.3s ease;
        }

        .url-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(0, 255, 136, 0.1);
        }

        .url-input::placeholder {
            color: var(--text-secondary);
            opacity: 0.5;
        }

        /* Detected platform pill inside input */
        .detected-platform {
            position: absolute;
            right: 12px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            display: none;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .detected-platform.show {
            display: flex;
        }

        .detected-platform.platform-youtube {
            background: rgba(255, 0, 0, 0.2);
            color: #ff4444;
            border: 1px solid rgba(255, 0, 0, 0.3);
        }

        .detected-platform.platform-youtube_shorts {
            background: rgba(255, 69, 0, 0.2);
            color: #ff8c44;
            border: 1px solid rgba(255, 69, 0, 0.3);
        }

        .detected-platform.platform-instagram {
            background: rgba(225, 48, 108, 0.2);
            color: #ff6b9d;
            border: 1px solid rgba(225, 48, 108, 0.3);
        }

        .detected-platform.platform-tiktok {
            background: rgba(105, 201, 208, 0.2);
            color: #69c9d0;
            border: 1px solid rgba(105, 201, 208, 0.3);
        }

        /* ‚îÄ‚îÄ Video Preview ‚îÄ‚îÄ */
        .video-preview {
            display: none;
            margin: 0 0 20px;
            padding: 18px;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .video-preview.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .video-preview-content {
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .video-thumbnail {
            width: 120px;
            height: 90px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .video-details {
            flex: 1;
        }

        .video-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .video-meta {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* ‚îÄ‚îÄ Format Grid ‚îÄ‚îÄ */
        .format-section-label {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-secondary);
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 12px;
        }

        /* Quality formats (YouTube only) */
        .format-group {
            margin-bottom: 20px;
        }

        .format-group-title {
            font-size: 0.75rem;
            color: var(--text-secondary);
            font-family: 'Space Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            padding-left: 4px;
        }

        .format-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 12px;
        }

        .format-grid.two-col {
            grid-template-columns: repeat(2, 1fr);
        }

        /* Hide/show format groups based on platform */
        .format-group.yt-only {
            display: block;
        }

        .format-group.yt-only.hidden {
            display: none;
        }

        .format-option {
            position: relative;
        }

        .format-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .format-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 16px 10px;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            height: 100%;
        }

        .format-option input[type="radio"]:checked+.format-label {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 255, 136, 0.2);
        }

        .format-label:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .format-icon {
            font-size: 1.8rem;
            margin-bottom: 6px;
        }

        .format-name {
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 3px;
            color: var(--text-primary);
        }

        .format-desc {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* ‚îÄ‚îÄ Download Button ‚îÄ‚îÄ */
        .download-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
            color: var(--bg-primary);
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .download-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .download-btn:hover::before {
            left: 100%;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 255, 136, 0.4);
        }

        .download-btn:active {
            transform: translateY(0);
        }

        .download-btn:disabled {
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ‚îÄ‚îÄ Progress ‚îÄ‚îÄ */
        .progress-container {
            display: none;
            margin-top: 25px;
            padding: 25px;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .progress-container.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        .progress-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .progress-icon {
            font-size: 2.5rem;
            animation: bounce 1s ease-in-out infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .progress-text {
            flex: 1;
        }

        .progress-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .progress-subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-primary);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), #00ffff);
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .progress-percentage {
            text-align: center;
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .progress-step {
            flex: 1;
            text-align: center;
            padding: 10px;
            font-size: 0.82rem;
            color: var(--text-secondary);
        }

        .progress-step.active {
            color: var(--accent);
            font-weight: 600;
        }

        .progress-step.completed {
            color: var(--accent);
        }

        .step-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
            display: block;
        }

        /* ‚îÄ‚îÄ Status Message ‚îÄ‚îÄ */
        .status-message {
            padding: 15px 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: 500;
            display: none;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .status-message.info {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--accent);
            color: var(--accent);
            display: block;
        }

        .status-message.error {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid var(--error);
            color: var(--error);
            display: block;
        }

        /* ‚îÄ‚îÄ Success Popup ‚îÄ‚îÄ */
        .success-popup-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 9999;
        }

        .success-popup-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease-out;
        }

        .success-popup {
            background: var(--bg-card);
            border: 2px solid var(--accent);
            border-radius: 25px;
            padding: 50px 40px;
            max-width: 450px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 255, 136, 0.3);
            animation: popupBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
        }

        @keyframes popupBounce {
            0% {
                transform: scale(0.3);
                opacity: 0;
            }

            50% {
                transform: scale(1.05);
            }

            70% {
                transform: scale(0.95);
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .success-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: successIconBounce 1s ease-in-out;
            display: inline-block;
        }

        @keyframes successIconBounce {

            0%,
            100% {
                transform: scale(1) rotate(0deg);
            }

            25% {
                transform: scale(1.2) rotate(-10deg);
            }

            50% {
                transform: scale(1.1) rotate(10deg);
            }

            75% {
                transform: scale(1.2) rotate(-10deg);
            }
        }

        .success-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 15px;
            font-family: 'Space Mono', monospace;
        }

        .success-message {
            font-size: 1.05rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .success-confetti {
            position: absolute;
            font-size: 1.5rem;
            animation: confettiFall 3s ease-out infinite;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100%) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(500%) rotate(720deg);
                opacity: 0;
            }
        }

        .popup-close-btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
            color: var(--bg-primary);
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .popup-close-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 255, 136, 0.4);
        }

        /* ‚îÄ‚îÄ Feature Cards ‚îÄ‚îÄ */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
            animation: fadeInUp 0.8s ease-out 0.4s backwards;
        }

        .feature-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
            box-shadow: 0 8px 25px rgba(0, 255, 136, 0.15);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }

        .feature-title {
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .feature-desc {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
        footer {
            text-align: center;
            margin-top: 60px;
            padding: 30px 20px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid var(--border);
        }

        .disclaimer {
            max-width: 700px;
            margin: 0 auto 20px;
            line-height: 1.6;
        }

        /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }

            .main-card {
                padding: 20px;
            }

            .format-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .format-grid.two-col {
                grid-template-columns: 1fr 1fr;
            }

            .video-preview-content {
                flex-direction: column;
            }

            .video-thumbnail {
                width: 100%;
                height: auto;
                max-height: 200px;
            }

            .success-popup {
                padding: 40px 25px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.8rem;
            }

            .format-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">

        <!-- Header -->
        <header>
            <h1>RIPIT</h1>
            <p class="tagline">Download from YouTube, Instagram & TikTok ‚Äî instantly.</p>
            <div class="platform-badges">
                <span class="platform-badge badge-yt">‚ñ∂ YouTube</span>
                <span class="platform-badge badge-yt-s">‚ö° Shorts</span>
                <span class="platform-badge badge-ig">‚óà Instagram</span>
                <span class="platform-badge badge-tt">‚ô™ TikTok</span>
            </div>
        </header>

        <!-- Main Card -->
        <div class="main-card">

            <!-- URL Input -->
            <div class="input-group">
                <label for="videoUrl">Paste Link</label>
                <div class="url-wrapper">
                    <input type="text" id="videoUrl" class="url-input"
                        placeholder="YouTube, Instagram or TikTok link..." autocomplete="off">
                    <span id="detectedPlatform" class="detected-platform"></span>
                </div>
            </div>

            <!-- Video Preview -->
            <div id="videoPreview" class="video-preview">
                <div class="video-preview-content">
                    <img id="videoThumbnail" class="video-thumbnail" src="" alt="Thumbnail">
                    <div class="video-details">
                        <div id="videoTitle" class="video-title"></div>
                        <div id="videoMeta" class="video-meta"></div>
                    </div>
                </div>
            </div>

            <!-- Format Selection -->
            <div class="input-group">
                <div class="format-section-label">Choose Format</div>

                <!-- YouTube quality group (hidden for Instagram/TikTok) -->
                <div class="format-group yt-only" id="ytQualityGroup">
                    <div class="format-group-title">Video Quality</div>
                    <div class="format-grid">
                        <div class="format-option">
                            <input type="radio" name="format" id="mp4-1080p" value="1080p" checked>
                            <label for="mp4-1080p" class="format-label">
                                <span class="format-icon">üé¨</span>
                                <span class="format-name">1080p HD</span>
                                <span class="format-desc">Best quality</span>
                            </label>
                        </div>
                        <div class="format-option">
                            <input type="radio" name="format" id="mp4-720p" value="720p">
                            <label for="mp4-720p" class="format-label">
                                <span class="format-icon">üìπ</span>
                                <span class="format-name">720p HD</span>
                                <span class="format-desc">Balanced</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Universal formats (all platforms) -->
                <div class="format-group">
                    <div class="format-group-title" id="universalGroupTitle">Audio & Extras</div>
                    <div class="format-grid" id="universalFormats">
                        <!-- Best video (for Instagram/TikTok) -->
                        <div class="format-option" id="bestVideoOption" style="display:none;">
                            <input type="radio" name="format" id="best-video" value="best">
                            <label for="best-video" class="format-label">
                                <span class="format-icon">üé•</span>
                                <span class="format-name">Best Video</span>
                                <span class="format-desc">Max quality</span>
                            </label>
                        </div>
                        <div class="format-option">
                            <input type="radio" name="format" id="mp3" value="mp3">
                            <label for="mp3" class="format-label">
                                <span class="format-icon">üéµ</span>
                                <span class="format-name">MP3 Audio</span>
                                <span class="format-desc">Audio only</span>
                            </label>
                        </div>
                        <div class="format-option" id="thumbnailOption">
                            <input type="radio" name="format" id="thumbnail" value="thumbnail">
                            <label for="thumbnail" class="format-label">
                                <span class="format-icon">üñºÔ∏è</span>
                                <span class="format-name">Thumbnail</span>
                                <span class="format-desc">Max res JPG</span>
                            </label>
                        </div>
                        <div class="format-option" id="subtitleOption">
                            <input type="radio" name="format" id="subtitle" value="subtitle">
                            <label for="subtitle" class="format-label">
                                <span class="format-icon">üìù</span>
                                <span class="format-name">Subtitles</span>
                                <span class="format-desc">SRT format</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Download Button -->
            <button class="download-btn" id="downloadBtn">‚¨á Download Now</button>

            <!-- Progress -->
            <div id="progressContainer" class="progress-container">
                <div class="progress-header">
                    <span class="progress-icon" id="progressIcon">‚è≥</span>
                    <div class="progress-text">
                        <div class="progress-title" id="progressTitle">Preparing download...</div>
                        <div class="progress-subtitle" id="progressSubtitle">This won't take long!</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-percentage" id="progressPercentage">0%</div>
                <div class="progress-steps">
                    <div class="progress-step" id="step1"><span class="step-icon">üìã</span><span>Validating</span></div>
                    <div class="progress-step" id="step2"><span class="step-icon">‚¨áÔ∏è</span><span>Downloading</span>
                    </div>
                    <div class="progress-step" id="step3"><span class="step-icon">‚öôÔ∏è</span><span>Processing</span></div>
                    <div class="progress-step" id="step4"><span class="step-icon">‚úÖ</span><span>Complete</span></div>
                </div>
            </div>

            <div id="statusMessage" class="status-message"></div>
        </div>

        <!-- Feature Cards -->
        <div class="features">
            <div class="feature-card">
                <span class="feature-icon">üîç</span>
                <h3 class="feature-title">Auto-Detection</h3>
                <p class="feature-desc">Paste any link ‚Äî YouTube, Shorts, Instagram Reels, or TikTok. Platform is
                    detected instantly.</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">‚ö°</span>
                <h3 class="feature-title">Lightning Fast</h3>
                <p class="feature-desc">High-speed downloads with no waiting queues or throttling.</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">üîí</span>
                <h3 class="feature-title">No Registration</h3>
                <p class="feature-desc">No account needed. Just paste, select format, and download.</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">üéØ</span>
                <h3 class="feature-title">Multiple Formats</h3>
                <p class="feature-desc">Download as HD video, MP3 audio, thumbnail, or subtitles.</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">üì±</span>
                <h3 class="feature-title">Mobile Friendly</h3>
                <p class="feature-desc">Works perfectly on all devices ‚Äî desktop, tablet, and mobile.</p>
            </div>
            <div class="feature-card">
                <span class="feature-icon">üíØ</span>
                <h3 class="feature-title">100% Free</h3>
                <p class="feature-desc">Completely free with no hidden fees or download limits.</p>
            </div>
        </div>

        <footer>
            <div class="disclaimer">
                <strong>Disclaimer:</strong> This tool is for personal and educational use only. Users are responsible
                for complying with applicable copyright laws and each platform's Terms of Service. Only download content
                you have permission to use.
            </div>
            <p>Made with üíö | RipIt ¬© 2026</p>
        </footer>
    </div>

    <!-- Success Popup -->
    <div id="successPopup" class="success-popup-overlay">
        <div class="success-popup">
            <span class="success-confetti" style="left:10%;animation-delay:0s">üéâ</span>
            <span class="success-confetti" style="left:30%;animation-delay:0.5s">‚ú®</span>
            <span class="success-confetti" style="left:50%;animation-delay:1s">üéä</span>
            <span class="success-confetti" style="left:70%;animation-delay:1.5s">‚≠ê</span>
            <span class="success-confetti" style="left:90%;animation-delay:2s">üéà</span>
            <div class="success-icon" id="successIcon">üéâ</div>
            <h2 class="success-title" id="successTitle">Download Complete!</h2>
            <p class="success-message" id="successMessage">Your file has been downloaded successfully!</p>
            <button class="popup-close-btn" id="popupCloseBtn">Awesome!</button>
        </div>
    </div>

    <script>
        const API_URL = window.location.origin;

        // Elements
        const downloadBtn = document.getElementById('downloadBtn');
        const videoUrlEl = document.getElementById('videoUrl');
        const statusMessage = document.getElementById('statusMessage');
        const videoPreview = document.getElementById('videoPreview');
        const videoThumbnail = document.getElementById('videoThumbnail');
        const videoTitle = document.getElementById('videoTitle');
        const videoMeta = document.getElementById('videoMeta');
        const progressContainer = document.getElementById('progressContainer');
        const progressFill = document.getElementById('progressFill');
        const progressPercentage = document.getElementById('progressPercentage');
        const progressTitle = document.getElementById('progressTitle');
        const progressSubtitle = document.getElementById('progressSubtitle');
        const progressIcon = document.getElementById('progressIcon');
        const successPopup = document.getElementById('successPopup');
        const popupCloseBtn = document.getElementById('popupCloseBtn');
        const successIcon = document.getElementById('successIcon');
        const successTitle = document.getElementById('successTitle');
        const successMessage = document.getElementById('successMessage');
        const detectedPlatformEl = document.getElementById('detectedPlatform');
        const ytQualityGroup = document.getElementById('ytQualityGroup');
        const bestVideoOption = document.getElementById('bestVideoOption');
        const thumbnailOption = document.getElementById('thumbnailOption');
        const subtitleOption = document.getElementById('subtitleOption');

        let debounceTimer;
        let isDownloading = false;
        let currentPlatform = null;

        // ‚îÄ‚îÄ Platform Detection (client-side) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

        const PLATFORM_PATTERNS = {
            youtube_shorts: /youtube\.com\/shorts\//,
            youtube: /youtube\.com\/watch|youtu\.be\//,
            instagram: /instagram\.com\/(reel|p|tv)\//,
            tiktok: /tiktok\.com\//
        };

        const PLATFORM_INFO = {
            youtube: { label: '‚ñ∂ YouTube', cls: 'platform-youtube', icon: '‚ñ∂' },
            youtube_shorts: { label: '‚ö° Shorts', cls: 'platform-youtube_shorts', icon: '‚ö°' },
            instagram: { label: '‚óà Instagram', cls: 'platform-instagram', icon: '‚óà' },
            tiktok: { label: '‚ô™ TikTok', cls: 'platform-tiktok', icon: '‚ô™' }
        };

        function detectPlatform(url) {
            for (const [platform, pattern] of Object.entries(PLATFORM_PATTERNS)) {
                if (pattern.test(url)) return platform;
            }
            return null;
        }

        // ‚îÄ‚îÄ Adapt UI to platform ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

        function adaptFormatUI(platform) {
            currentPlatform = platform;

            const isYT = platform === 'youtube' || platform === 'youtube_shorts';

            // Show/hide YouTube quality options
            ytQualityGroup.classList.toggle('hidden', !isYT);
            bestVideoOption.style.display = isYT ? 'none' : 'block';
            thumbnailOption.style.display = isYT ? 'block' : 'none';
            subtitleOption.style.display = isYT ? 'block' : 'none';

            if (isYT) {
                // Default: 1080p for YouTube, 720p for Shorts
                const defaultId = platform === 'youtube_shorts' ? 'mp4-720p' : 'mp4-1080p';
                document.getElementById(defaultId).checked = true;
            } else {
                document.getElementById('best-video').checked = true;
            }
        }

        function updateDetectedBadge(platform) {
            const info = PLATFORM_INFO[platform];
            detectedPlatformEl.textContent = info.label;
            detectedPlatformEl.className = `detected-platform show ${info.cls}`;
        }

        function clearDetectedBadge() {
            detectedPlatformEl.className = 'detected-platform';
        }

        // ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

        function getSelectedFormat() {
            return document.querySelector('input[name="format"]:checked').value;
        }

        function getFormatDetails(format, platform) {
            const platformLabel = PLATFORM_INFO[platform]?.label || 'Video';
            const map = {
                '1080p': { icon: 'üé¨', title: 'Video Downloaded!', msg: `Your 1080p HD video is ready. üçø` },
                '720p': { icon: 'üìπ', title: 'Video Downloaded!', msg: `Your 720p HD video is ready. üçø` },
                'best': { icon: 'üé•', title: 'Video Downloaded!', msg: `Your ${platformLabel} video has been saved! üéâ` },
                'mp3': { icon: 'üéµ', title: 'Audio Downloaded!', msg: `Your MP3 is ready. Time to enjoy the music! üéß` },
                'thumbnail': { icon: 'üñºÔ∏è', title: 'Thumbnail Saved!', msg: `High-res thumbnail downloaded. ‚ú®` },
                'subtitle': { icon: 'üìù', title: 'Subtitles Saved!', msg: `SRT file downloaded and ready to use. üìñ` }
            };
            return map[format] || map['best'];
        }

        function showMessage(msg, type = 'info') {
            statusMessage.textContent = msg;
            statusMessage.className = `status-message ${type}`;
        }

        function hideMessage() {
            statusMessage.className = 'status-message';
        }

        function formatDuration(s) {
            if (!s) return '';
            const h = Math.floor(s / 3600);
            const m = Math.floor((s % 3600) / 60);
            const sec = s % 60;
            if (h > 0) return `${h}:${String(m).padStart(2, '0')}:${String(sec).padStart(2, '0')}`;
            return `${m}:${String(sec).padStart(2, '0')}`;
        }

        function formatViews(v) {
            if (!v) return '';
            if (v >= 1e6) return `${(v / 1e6).toFixed(1)}M views`;
            if (v >= 1e3) return `${(v / 1e3).toFixed(1)}K views`;
            return `${v} views`;
        }

        function updateProgress(pct, step, title, subtitle, icon) {
            progressFill.style.width = pct + '%';
            progressPercentage.textContent = Math.round(pct) + '%';
            progressTitle.textContent = title;
            progressSubtitle.textContent = subtitle;
            progressIcon.textContent = icon;
            document.querySelectorAll('.progress-step').forEach((el, i) => {
                el.classList.remove('active', 'completed');
                if (i < step - 1) el.classList.add('completed');
                else if (i === step - 1) el.classList.add('active');
            });
        }

        function showSuccessPopup(format) {
            const d = getFormatDetails(format, currentPlatform);
            successIcon.textContent = d.icon;
            successTitle.textContent = d.title;
            successMessage.textContent = d.msg;
            successPopup.classList.add('active');
        }

        function hideSuccessPopup() { successPopup.classList.remove('active'); }

        popupCloseBtn.addEventListener('click', hideSuccessPopup);
        successPopup.addEventListener('click', e => { if (e.target === successPopup) hideSuccessPopup(); });

        // ‚îÄ‚îÄ Fetch Video Info ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

        async function fetchVideoInfo(url) {
            try {
                const res = await fetch(`${API_URL}/api/video-info`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url })
                });
                if (!res.ok) throw new Error();
                const data = await res.json();
                videoThumbnail.src = data.thumbnail;
                videoTitle.textContent = data.title;
                const parts = [data.uploader];
                if (data.duration) parts.push(formatDuration(data.duration));
                if (data.view_count) parts.push(formatViews(data.view_count));
                videoMeta.textContent = parts.join(' ‚Ä¢ ');
                videoPreview.classList.add('active');
            } catch {
                videoPreview.classList.remove('active');
            }
        }

        // ‚îÄ‚îÄ URL Input Listener ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

        videoUrlEl.addEventListener('input', () => {
            const url = videoUrlEl.value.trim();
            clearTimeout(debounceTimer);

            const platform = detectPlatform(url);

            if (platform) {
                updateDetectedBadge(platform);
                adaptFormatUI(platform);
                debounceTimer = setTimeout(() => fetchVideoInfo(url), 600);
            } else {
                clearDetectedBadge();
                videoPreview.classList.remove('active');
                if (!url) adaptFormatUI('youtube'); // reset to default
            }

            if (statusMessage.classList.contains('error')) hideMessage();
        });

        // ‚îÄ‚îÄ Download Handler ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

        async function handleDownload(event) {
            if (event) event.preventDefault();

            const url = videoUrlEl.value.trim();
            if (!url) { showMessage('Please paste a link first.', 'error'); return; }

            const platform = detectPlatform(url);
            if (!platform) { showMessage('Unsupported link. Please use YouTube, Instagram, or TikTok.', 'error'); return; }

            const format = getSelectedFormat();

            downloadBtn.disabled = true;
            downloadBtn.textContent = 'Processing...';
            hideMessage();
            progressContainer.classList.add('active');

            updateProgress(10, 1, 'Validating link...', 'Checking availability', 'üìã');
            await new Promise(r => setTimeout(r, 700));
            updateProgress(30, 2, 'Fetching media...', `Connecting to ${PLATFORM_INFO[platform].label}`, '‚¨áÔ∏è');

            try {
                const response = await fetch(`${API_URL}/api/download`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url, format })
                });

                updateProgress(60, 3, 'Processing file...', 'Converting to selected format', '‚öôÔ∏è');

                if (!response.ok) {
                    let errMsg = 'Download failed';
                    try {
                        const err = await response.json();
                        errMsg = err.error || errMsg;
                        if (err.details?.includes('ffmpeg')) errMsg += ' (ffmpeg may not be installed)';
                    } catch { }
                    throw new Error(errMsg);
                }

                const contentDisposition = response.headers.get('Content-Disposition');
                let filename = 'download';
                if (contentDisposition) {
                    const m = contentDisposition.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);
                    if (m?.[1]) filename = m[1].replace(/['"]/g, '');
                }

                updateProgress(85, 4, 'Finalizing...', 'Almost there!', 'üéØ');

                const blob = await response.blob();
                updateProgress(100, 4, 'Download complete!', 'File saved successfully', '‚úÖ');

                const dlUrl = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.style.display = 'none';
                a.href = dlUrl;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                setTimeout(() => { document.body.removeChild(a); window.URL.revokeObjectURL(dlUrl); }, 100);

                setTimeout(() => {
                    showSuccessPopup(format);
                    progressContainer.classList.remove('active');
                }, 500);

            } catch (error) {
                console.error('Download error:', error);
                showMessage(`‚ùå ${error.message}`, 'error');
                progressContainer.classList.remove('active');
                setTimeout(() => {
                    successIcon.textContent = '‚ùå';
                    successTitle.textContent = 'Download Failed';
                    successMessage.textContent = error.message || 'Something went wrong. Please try again.';
                    successPopup.classList.add('active');
                }, 2000);
            } finally {
                downloadBtn.disabled = false;
                downloadBtn.textContent = '‚¨á Download Now';
            }
        }

        downloadBtn.addEventListener('click', e => {
            e.preventDefault();
            if (isDownloading) return;
            isDownloading = true;
            handleDownload(e).finally(() => { isDownloading = false; });
        });

        videoUrlEl.addEventListener('keypress', e => {
            if (e.key === 'Enter') {
                e.preventDefault();
                if (isDownloading) return;
                isDownloading = true;
                handleDownload(e).finally(() => { isDownloading = false; });
            }
        });

        // ‚îÄ‚îÄ Startup Checks ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

        (async () => {
            adaptFormatUI('youtube'); // default state

            try {
                const health = await fetch(`${API_URL}/api/health`).then(r => r.json());
                console.log('‚úì Backend:', health.message);

                const ytdlp = await fetch(`${API_URL}/api/check-ytdlp`).then(r => r.json());
                if (!ytdlp.installed) {
                    showMessage('‚ö†Ô∏è yt-dlp is not installed on the server. Please install yt-dlp and ffmpeg.', 'error');
                    return;
                }

                const ffmpeg = await fetch(`${API_URL}/api/check-ffmpeg`).then(r => r.json());
                if (!ffmpeg.installed) {
                    showMessage('‚ö†Ô∏è ffmpeg is not installed. Video merging may not work for HD formats.', 'error');
                }
            } catch {
                showMessage('‚ö†Ô∏è Backend server is not running. Please start the server first.', 'error');
            }
        })();
    </script>
</body>

</html>